<div class="card shadow-sm rounded-3 p-3">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center" *ngIf="selectedBudget">
    <div class="dropdown">
      <button
        class="btn btn-light btn-sm border-0 dropdown-toggle p-1 btn-hover-none"
        type="button"
        id="budgetDropdown"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        {{ selectedBudget?.name }}
      </button>
      <ul class="dropdown-menu" aria-labelledby="budgetDropdown">
        <li *ngFor="let b of budgets">
          <a class="dropdown-item" (click)="onSelectBudget(b)">
            {{ b.name }} <br />
            <small class="text-muted"
              >{{ b.startDate | date: 'Y-MM-d' }} – {{ b.endDate | date: 'Y-MM-d' }}</small
            >
          </a>
        </li>
      </ul>
    </div>
    <button
      class="btn btn-sm border-0 bg-transparent shadow-none p-0"
      type="button"
      id="dropdownMenu"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      <i class="bi bi-three-dots-vertical"></i>
    </button>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenu">
      <li><a class="dropdown-item cursor-pointer" (click)="onEdit()">Edit</a></li>
      <li><a class="dropdown-item text-danger cursor-pointer" (click)="onDelete()">Delete</a></li>
    </ul>
  </div>
  <div>
    <small class="text-muted">
      <i class="bi bi-calendar me-2 text-muted"></i>
      {{ selectedBudget.startDate | date: 'Y-MM-d' }} –
      {{ selectedBudget.endDate | date: 'Y-MM-d' }}
    </small>
  </div>

  <div class="mt-3">
    <div class="d-flex justify-content-between">
      <span class="text-success fw-bold">{{ selectedBudget.spentBudgetPercentage }} spent</span>
      <span class="text-primary fw-bold">{{ selectedBudget.remainingBudgetPercentage }} left</span>
    </div>
    <div class="progress mt-1" style="height: 12px">
      <div
        class="progress-bar bg-success"
        role="progressbar"
        [style]="'width:' + selectedBudget.spentBudgetPercentage"
      ></div>
    </div>
  </div>

  <div class="row text-center mt-3">
    <div class="col-12 col-md-4">
      <div class="border rounded p-2 border border-success">
        <small class="text-muted">Total Budget</small>
        <div class="fw-bold">
          {{ exchangeRate.baseCurrency + ' ' }}{{ selectedBudget.amount | number: '1.2-2' }}
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4">
      <div class="border rounded p-2">
        <small class="text-muted">Spent money</small>
        <div class="fw-bold text-danger">
          {{ exchangeRate.baseCurrency + ' ' }}{{ selectedBudget.spentBudget | number: '1.2-2' }}
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4 mt-2 mt-md-0">
      <div class="border rounded p-2">
        <small class="text-muted">Rest of money</small>
        <div class="fw-bold text-success">
          {{ exchangeRate.baseCurrency + ' '
          }}{{ selectedBudget.remainingBudget | number: '1.2-2' }}
        </div>
      </div>
    </div>
  </div>
</div>
